<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TechHub â€” Sistema Unificado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Sora:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* â”€â”€â”€ Variables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --bg:         #030508;
      --surface:    #0c0f16;
      --surface2:   #131825;
      --surface3:   #1b2030;
      --accent:     #6c63ff;
      --accent2:    #9d97ff;
      --cyan:       #00d4ff;
      --red:        #ff4757;
      --green:      #22c55e;
      --yellow:     #f59e0b;
      --text:       #e2e5f0;
      --muted:      #636882;
      --border:     #1e2336;
      --sidebar-w:  240px;
      --radius:     12px;
      --radius-sm:  6px;
      --font:       'Sora', system-ui, sans-serif;
      --font-head:  'Rajdhani', sans-serif;
      --font-mono:  'Space Mono', monospace;
      --transition: .18s cubic-bezier(.4,0,.2,1);
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { font-size: 15px; scroll-behavior: smooth; }
    body {
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* â”€â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .app-shell {
      display: flex;
      min-height: 100vh;
    }

    /* â”€â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar {
      width: var(--sidebar-w);
      min-height: 100vh;
      background: #060810;
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      position: fixed;
      top: 0; left: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 200;
      transition: transform .3s ease;
    }
    .sidebar-brand {
      padding: 1.4rem 1.2rem 1.1rem;
      display: flex;
      align-items: center;
      gap: .7rem;
      text-decoration: none;
      border-bottom: 1px solid var(--border);
      margin-bottom: .4rem;
    }
    .sidebar-logo {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--accent), var(--cyan));
      border-radius: 9px;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
    }
    .sidebar-logo svg { width: 20px; height: 20px; fill: #fff; }
    .sidebar-name {
      font-family: var(--font-head);
      font-size: 1.25rem; font-weight: 700; color: #fff; letter-spacing: 1px;
      line-height: 1.1;
    }
    .sidebar-name small {
      display: block; font-family: var(--font);
      font-size: .58rem; font-weight: 400; color: var(--muted);
      letter-spacing: .06em; text-transform: uppercase;
    }
    .sidebar-section {
      padding: .25rem .9rem .1rem;
      font-size: .58rem; font-weight: 700;
      letter-spacing: .15em; text-transform: uppercase;
      color: var(--muted); margin-top: .5rem;
    }
    .nav-item {
      display: flex; align-items: center; gap: .65rem;
      padding: .55rem .9rem; margin: .08rem .5rem;
      border-radius: var(--radius-sm);
      text-decoration: none; color: var(--muted);
      font-size: .8rem; font-weight: 500;
      cursor: pointer; border: none; background: none; width: calc(100% - 1rem);
      text-align: left;
      transition: background var(--transition), color var(--transition);
    }
    .nav-item svg { width: 15px; height: 15px; flex-shrink: 0; stroke: currentColor; fill: none; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
    .nav-item:hover { background: var(--surface2); color: var(--text); }
    .nav-item.active { background: rgba(108,99,255,.15); color: var(--accent2); }
    .nav-item.active svg { stroke: var(--accent2); }
    .nav-item .badge {
      margin-left: auto; background: var(--accent);
      color: #fff; font-size: .58rem; font-weight: 700;
      padding: 2px 7px; border-radius: 20px;
    }
    .sidebar-footer {
      margin-top: auto; padding: .9rem 1rem;
      border-top: 1px solid var(--border);
      font-size: .65rem; color: var(--muted); text-align: center;
    }
    .module-badge {
      display: inline-block; font-size: .55rem; font-weight: 700;
      letter-spacing: .1em; text-transform: uppercase;
      padding: 2px 8px; border-radius: 20px; margin-left: auto;
    }
    .badge-admin { background: rgba(108,99,255,.2); color: var(--accent2); }
    .badge-store { background: rgba(0,212,255,.15); color: var(--cyan); }
    .badge-stream { background: rgba(255,71,87,.15); color: var(--red); }

    /* â”€â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-wrap {
      flex: 1;
      margin-left: var(--sidebar-w);
      display: flex; flex-direction: column;
      min-width: 0;
    }
    .topbar {
      background: rgba(6,8,16,.9);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      padding: .8rem 2rem;
      display: flex; align-items: center; justify-content: space-between;
      gap: 1rem;
      position: sticky; top: 0; z-index: 100;
    }
    .topbar-left { display: flex; flex-direction: column; gap: .1rem; }
    .page-title { font-size: 1rem; font-weight: 600; color: var(--text); }
    .breadcrumb { font-size: .7rem; color: var(--muted); }
    .topbar-right { display: flex; align-items: center; gap: .6rem; }
    .topbar-avatar {
      width: 32px; height: 32px;
      background: linear-gradient(135deg, var(--accent), var(--cyan));
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: .68rem; font-weight: 700; color: #fff; cursor: pointer;
    }
    .topbar-cart-btn {
      background: rgba(0,212,255,.1); border: 1px solid rgba(0,212,255,.3);
      color: var(--cyan); padding: 6px 14px; border-radius: 8px;
      font-size: .75rem; font-weight: 600; cursor: pointer;
      transition: background var(--transition);
      display: flex; align-items: center; gap: 6px;
    }
    .topbar-cart-btn:hover { background: rgba(0,212,255,.2); }
    #cart-count {
      background: var(--red); color: #fff; border-radius: 50%;
      width: 18px; height: 18px; font-size: .65rem; font-weight: 700;
      display: flex; align-items: center; justify-content: center;
    }
    .main { flex: 1; padding: 2rem; }

    /* â”€â”€â”€ PAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page { display: none; }
    .page.active { display: block; }

    /* â”€â”€â”€ HUB HOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .orb {
      position: fixed; border-radius: 50%;
      filter: blur(120px); pointer-events: none; opacity: .12; z-index: 0;
    }
    .orb-1 { width: 500px; height: 500px; background: var(--accent); top: -200px; left: 50px; }
    .orb-2 { width: 350px; height: 350px; background: var(--cyan); bottom: -80px; right: 100px; }
    .orb-3 { width: 250px; height: 250px; background: var(--red); top: 40%; left: 60%; }

    .hub-hero {
      text-align: center; padding: 3rem 1rem 2rem;
      position: relative; z-index: 1;
    }
    .hub-title {
      font-family: var(--font-head);
      font-size: 5rem; font-weight: 700; color: #fff; letter-spacing: 4px;
      line-height: 1;
    }
    .hub-title span {
      background: linear-gradient(90deg, var(--accent), var(--cyan));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .hub-sub {
      font-size: .72rem; color: var(--muted);
      letter-spacing: .25em; text-transform: uppercase; margin-top: .7rem;
    }
    .hub-cards {
      display: grid; grid-template-columns: repeat(3,1fr); gap: 20px;
      margin-top: 3rem; position: relative; z-index: 1;
    }
    .hub-card {
      border: 1px solid var(--border); border-radius: 20px;
      padding: 2.2rem 1.8rem;
      background: var(--surface); cursor: pointer;
      transition: transform .3s ease, border-color .3s, box-shadow .3s;
      display: flex; flex-direction: column; gap: 14px;
      position: relative; overflow: hidden;
    }
    .hub-card::before {
      content: ''; position: absolute; inset: 0; border-radius: 20px;
      opacity: 0; transition: opacity .3s;
    }
    .hub-card.admin::before { background: radial-gradient(circle at 30% 30%, rgba(108,99,255,.15), transparent 60%); }
    .hub-card.store::before { background: radial-gradient(circle at 30% 30%, rgba(0,212,255,.15), transparent 60%); }
    .hub-card.stream::before { background: radial-gradient(circle at 30% 30%, rgba(255,71,87,.15), transparent 60%); }
    .hub-card:hover { transform: translateY(-8px); }
    .hub-card:hover::before { opacity: 1; }
    .hub-card.admin:hover { border-color: var(--accent); box-shadow: 0 20px 60px rgba(108,99,255,.2); }
    .hub-card.store:hover { border-color: var(--cyan); box-shadow: 0 20px 60px rgba(0,212,255,.2); }
    .hub-card.stream:hover { border-color: var(--red); box-shadow: 0 20px 60px rgba(255,71,87,.2); }
    .hub-card-icon {
      width: 52px; height: 52px; border-radius: 13px;
      display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
    }
    .admin .hub-card-icon { background: rgba(108,99,255,.2); border: 1px solid rgba(108,99,255,.3); }
    .store .hub-card-icon { background: rgba(0,212,255,.2); border: 1px solid rgba(0,212,255,.3); }
    .stream .hub-card-icon { background: rgba(255,71,87,.2); border: 1px solid rgba(255,71,87,.3); }
    .hub-card-tag {
      font-size: .58rem; letter-spacing: .12em; text-transform: uppercase;
      padding: 3px 10px; border-radius: 20px; font-weight: 700; width: fit-content;
    }
    .admin .hub-card-tag { background: rgba(108,99,255,.15); color: var(--accent2); }
    .store .hub-card-tag { background: rgba(0,212,255,.15); color: var(--cyan); }
    .stream .hub-card-tag { background: rgba(255,71,87,.15); color: var(--red); }
    .hub-card-title {
      font-family: var(--font-head); font-size: 1.7rem; font-weight: 700; color: #fff;
    }
    .hub-card-desc { font-size: .75rem; color: var(--muted); line-height: 1.8; }
    .hub-card-arrow {
      margin-top: auto; font-size: .68rem; letter-spacing: .15em; text-transform: uppercase;
      display: flex; align-items: center; gap: 8px;
      padding-top: 14px; border-top: 1px solid var(--border); width: 100%;
    }
    .admin .hub-card-arrow { color: var(--accent2); }
    .store .hub-card-arrow { color: var(--cyan); }
    .stream .hub-card-arrow { color: var(--red); }

    /* â”€â”€â”€ DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .dashboard-hero {
      background: linear-gradient(135deg, var(--surface2) 0%, var(--surface3) 100%);
      border: 1px solid var(--border); border-radius: var(--radius);
      padding: 1.8rem 2rem; margin-bottom: 1.5rem; position: relative; overflow: hidden;
    }
    .dashboard-hero::before {
      content: ''; position: absolute; top: -60px; right: -60px;
      width: 200px; height: 200px; border-radius: 50%;
      background: radial-gradient(circle, rgba(108,99,255,.2) 0%, transparent 70%);
    }
    .dashboard-hero h1 { font-size: 1.4rem; font-weight: 700; color: var(--text); margin-bottom: .3rem; }
    .dashboard-hero p { font-size: .8rem; color: var(--muted); }

    .kpi-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 1rem; margin-bottom: 1.5rem; }
    .kpi {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 1.2rem 1.4rem;
    }
    .kpi-label { font-size: .68rem; font-weight: 600; text-transform: uppercase; letter-spacing: .1em; color: var(--muted); margin-bottom: .5rem; }
    .kpi-value { font-size: 1.8rem; font-weight: 700; color: var(--text); font-family: var(--font-mono); }
    .kpi-sub { font-size: .7rem; color: var(--green); margin-top: .3rem; }
    .kpi-sub.neg { color: var(--red); }

    .modules-grid-dash {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: .8rem;
    }
    .module-card-dash {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 1.4rem;
      text-decoration: none; color: var(--text);
      display: flex; flex-direction: column; gap: .5rem;
      cursor: pointer; border: none; text-align: left; width: 100%;
      transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition);
    }
    .module-card-dash:hover {
      border-color: var(--accent); transform: translateY(-3px);
      box-shadow: 0 8px 32px rgba(108,99,255,.15);
    }
    .card-icon-dash {
      width: 38px; height: 38px; background: var(--surface2);
      border-radius: 9px; display: flex; align-items: center; justify-content: center;
      margin-bottom: .2rem;
    }
    .card-icon-dash svg { width: 18px; height: 18px; stroke: var(--accent2); fill: none; stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; }
    .card-tag-dash { font-size: .58rem; font-weight: 700; letter-spacing: .12em; text-transform: uppercase; color: var(--accent2); }
    .card-title-dash { font-size: 1rem; font-weight: 600; color: var(--text); }
    .card-desc-dash { font-size: .75rem; color: var(--muted); line-height: 1.5; }

    /* â”€â”€â”€ PANEL TABLA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .panel {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); overflow: hidden;
    }
    .panel-header {
      padding: 1rem 1.5rem; border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
    }
    .panel-title { font-size: .9rem; font-weight: 600; color: var(--text); }
    .panel-actions { display: flex; gap: .5rem; }
    table { width: 100%; border-collapse: collapse; }
    thead th {
      padding: .7rem 1.2rem; font-size: .68rem; font-weight: 700;
      text-transform: uppercase; letter-spacing: .1em; color: var(--muted);
      border-bottom: 1px solid var(--border); text-align: left; background: var(--surface);
    }
    tbody tr { border-bottom: 1px solid var(--border); transition: background var(--transition); }
    tbody tr:last-child { border-bottom: none; }
    tbody tr:hover { background: var(--surface2); }
    td { padding: .75rem 1.2rem; font-size: .8rem; color: var(--text); }
    td img { width: 40px; height: 40px; object-fit: cover; border-radius: 6px; }

    /* â”€â”€â”€ BADGES / PILLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .pill {
      display: inline-flex; align-items: center;
      font-size: .65rem; font-weight: 700; letter-spacing: .05em;
      padding: 3px 9px; border-radius: 20px;
    }
    .pill-green { background: rgba(34,197,94,.15); color: var(--green); }
    .pill-red   { background: rgba(239,68,68,.15);  color: #ef4444; }
    .pill-yellow{ background: rgba(245,158,11,.15); color: var(--yellow); }
    .pill-purple{ background: rgba(108,99,255,.15); color: var(--accent2); }

    /* â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn {
      padding: .5rem 1.1rem; border-radius: var(--radius-sm);
      font-size: .78rem; font-weight: 600; cursor: pointer;
      border: none; transition: all var(--transition); font-family: var(--font);
    }
    .btn-primary { background: var(--accent); color: #fff; }
    .btn-primary:hover { background: var(--accent2); transform: translateY(-1px); }
    .btn-outline { background: transparent; color: var(--muted); border: 1px solid var(--border); }
    .btn-outline:hover { background: var(--surface2); color: var(--text); }
    .btn-danger { background: rgba(239,68,68,.15); color: #ef4444; border: 1px solid rgba(239,68,68,.2); }
    .btn-danger:hover { background: rgba(239,68,68,.3); }
    .btn-cyan { background: rgba(0,212,255,.15); color: var(--cyan); border: 1px solid rgba(0,212,255,.25); }
    .btn-cyan:hover { background: rgba(0,212,255,.28); }
    .btn-sm { padding: .3rem .7rem; font-size: .7rem; }

    /* â”€â”€â”€ FORMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-panel {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 2rem; max-width: 560px;
    }
    .form-panel h2 { font-size: 1.1rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--text); }
    .form-group { margin-bottom: 1rem; }
    label { display: block; font-size: .75rem; font-weight: 600; color: var(--muted); margin-bottom: .4rem; letter-spacing: .04em; text-transform: uppercase; }
    input[type=text], input[type=number], input[type=email], input[type=password], select, textarea {
      width: 100%; padding: .65rem .9rem;
      background: var(--surface2); border: 1px solid var(--border); color: var(--text);
      border-radius: var(--radius-sm); font-family: var(--font); font-size: .85rem;
      transition: border-color var(--transition), box-shadow var(--transition);
      outline: none;
    }
    input:focus, select:focus, textarea:focus {
      border-color: var(--accent); box-shadow: 0 0 0 3px rgba(108,99,255,.15);
    }
    .form-actions { display: flex; gap: .6rem; margin-top: 1.5rem; }
    .img-preview {
      width: 80px; height: 80px; border-radius: 8px; object-fit: cover;
      border: 1px solid var(--border); display: none; margin-top: .5rem;
    }

    /* â”€â”€â”€ TIENDA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .store-hero {
      background: linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.55)),
        url('https://images.unsplash.com/photo-1587202372775-e229f172b9d7?auto=format&fit=crop&w=1200&q=80') center/cover;
      height: 300px; display: flex; align-items: center; justify-content: center;
      text-align: center; flex-direction: column; border-radius: var(--radius);
      margin-bottom: 2rem; position: relative; overflow: hidden;
    }
    .store-hero h1 { font-family: var(--font-head); font-size: 3.5rem; color: #fff; text-shadow: 0 0 30px var(--cyan); }
    .store-hero p { font-size: 1rem; color: rgba(255,255,255,.65); margin-top: .5rem; }

    .products-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(250px,1fr)); gap: 20px;
    }
    .product-card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); overflow: hidden;
      display: flex; flex-direction: column;
      transition: transform .3s, box-shadow .3s, border-color .3s;
    }
    .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,212,255,.15); border-color: var(--cyan); }
    .product-card img { width: 100%; height: 180px; object-fit: cover; }
    .product-card-body { padding: 1rem 1.1rem; flex: 1; display: flex; flex-direction: column; }
    .product-card-body h3 { font-size: .95rem; font-weight: 600; margin-bottom: .8rem; color: var(--text); }
    .product-price { font-size: 1.3rem; font-weight: 700; color: var(--cyan); }
    .product-stock { font-size: .72rem; color: var(--muted); }
    .product-card-actions { margin-top: auto; padding-top: 1rem; }

    /* â”€â”€â”€ CARRITO SHEET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .cart-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,.7);
      z-index: 400; display: none; justify-content: flex-end;
      backdrop-filter: blur(4px);
    }
    .cart-overlay.open { display: flex; }
    .cart-sheet {
      width: 420px; max-width: 95vw; background: var(--surface);
      height: 100%; border-left: 1px solid var(--border);
      display: flex; flex-direction: column;
      animation: slideIn .3s ease;
    }
    @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    .cart-header {
      padding: 1.2rem 1.4rem; border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
    }
    .cart-header h2 { font-family: var(--font-head); font-size: 1.4rem; color: #fff; }
    .cart-close { background: none; border: none; color: var(--muted); font-size: 1.4rem; cursor: pointer; }
    .cart-close:hover { color: var(--red); }
    .cart-items { flex: 1; overflow-y: auto; padding: 1rem; }
    .cart-item {
      display: flex; align-items: center; gap: 1rem;
      background: var(--surface2); border-radius: var(--radius-sm);
      padding: .8rem; margin-bottom: .7rem;
    }
    .cart-item img { width: 52px; height: 52px; object-fit: cover; border-radius: 6px; }
    .cart-item-info { flex: 1; }
    .cart-item-info span { display: block; font-size: .8rem; font-weight: 600; color: var(--text); }
    .cart-item-info small { font-size: .72rem; color: var(--cyan); font-weight: 700; }
    .cart-item-qty {
      display: flex; align-items: center; gap: 6px;
    }
    .qty-btn { background: var(--surface3); border: none; color: var(--text); width: 24px; height: 24px; border-radius: 4px; cursor: pointer; font-size: .85rem; }
    .qty-val { font-size: .85rem; font-weight: 700; min-width: 20px; text-align: center; color: var(--text); }
    .cart-item-del { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1rem; }
    .cart-item-del:hover { color: var(--red); }
    .cart-footer {
      padding: 1.2rem 1.4rem; border-top: 1px solid var(--border);
    }
    .cart-total { font-size: 1.4rem; font-weight: 700; color: var(--text); margin-bottom: 1rem; }
    .cart-total span { color: var(--cyan); }
    .cart-2fa {
      background: var(--surface2); border: 1px solid var(--border);
      border-radius: var(--radius-sm); padding: 1rem; margin-bottom: 1rem;
      font-size: .8rem; color: var(--muted); line-height: 1.6;
    }
    .cart-2fa strong { color: var(--yellow); }

    /* â”€â”€â”€ STREAMING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .stream-hero {
      position: relative; width: 100%; height: 70vh; min-height: 420px;
      display: flex; align-items: center; padding: 0 3rem;
      border-radius: var(--radius); overflow: hidden; margin-bottom: 2rem;
    }
    .stream-hero-bg {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
      background: linear-gradient(135deg, #0a0a1a, #1a0a1a);
    }
    .stream-hero-bg iframe {
      width: 100vw; height: 56.25vw; min-height: 100%; min-width: 177.77vh;
      position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
      opacity: .5;
    }
    .stream-overlay {
      position: absolute; inset: 0;
      background: linear-gradient(75deg, rgba(3,5,8,.92) 25%, transparent 65%),
                  linear-gradient(to top, var(--bg) 5%, transparent 25%);
    }
    .stream-content { position: relative; z-index: 2; max-width: 520px; }
    .stream-content h1 {
      font-family: var(--font-head); font-size: 3.5rem; line-height: .95;
      color: #fff; margin-bottom: 1rem;
    }
    .stream-content p { font-size: .9rem; color: rgba(255,255,255,.65); margin-bottom: 1.5rem; }
    .btn-play {
      background: #fff; color: #000; border: none; padding: 11px 28px;
      font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 1rem;
      display: flex; align-items: center; gap: 10px;
      transition: .2s; font-family: var(--font);
    }
    .btn-play:hover { background: rgba(255,255,255,.82); transform: scale(1.04); }

    .shelf { margin-bottom: 2rem; }
    .shelf h2 {
      font-family: var(--font-head); font-size: 1.35rem; color: #fff;
      margin-bottom: 1rem; border-left: 3px solid var(--red); padding-left: .8rem;
    }
    .carousel {
      display: flex; overflow-x: auto; gap: 14px;
      padding-bottom: 12px; scrollbar-width: thin; scrollbar-color: var(--border) transparent;
    }
    .vid-card {
      flex: 0 0 auto; width: 260px; aspect-ratio: 16/9;
      background: var(--surface); border-radius: 8px; overflow: hidden;
      cursor: pointer; border: 1px solid var(--border); position: relative;
      transition: transform .3s, border-color .3s, box-shadow .3s;
    }
    .vid-card:hover { transform: scale(1.06); z-index: 20; border-color: var(--cyan); box-shadow: 0 0 20px rgba(0,212,255,.3); }
    .vid-card img { width: 100%; height: 100%; object-fit: cover; }
    .vid-card-title {
      position: absolute; bottom: 0; width: 100%;
      background: linear-gradient(transparent, rgba(0,0,0,.88));
      padding: 18px 10px 8px; font-size: .75rem; font-weight: 600; color: #fff;
    }
    .vid-card .play-icon {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
      width: 40px; height: 40px; background: rgba(0,0,0,.6);
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      opacity: 0; transition: opacity .2s;
    }
    .vid-card:hover .play-icon { opacity: 1; }

    /* â”€â”€â”€ VIDEO MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .video-modal {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,.95); z-index: 5000;
      justify-content: center; align-items: center;
      backdrop-filter: blur(15px);
    }
    .video-modal.open { display: flex; }
    .video-modal-box {
      background: var(--surface); border: 1px solid var(--cyan);
      padding: 14px; border-radius: 10px;
      width: 90%; max-width: 900px; position: relative;
    }
    .video-modal-close {
      position: absolute; top: -42px; right: 0;
      background: var(--cyan); color: #000; border: none;
      padding: 8px 18px; border-radius: 4px; font-weight: 700; cursor: pointer;
      font-family: var(--font-mono); font-size: .8rem;
    }

    /* â”€â”€â”€ SOPORTE CHAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .chat-wrap {
      display: flex; flex-direction: column; height: calc(100vh - 130px);
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); overflow: hidden;
    }
    .chat-header {
      background: var(--surface2); padding: 1rem 1.4rem;
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; gap: 1rem;
    }
    .chat-avatar {
      width: 40px; height: 40px; border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--cyan));
      display: flex; align-items: center; justify-content: center; font-size: 1.1rem;
    }
    .chat-info h3 { font-size: .9rem; font-weight: 700; color: var(--text); }
    .chat-info p { font-size: .7rem; color: var(--green); }
    .online-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--green); display: inline-block; margin-right: 4px; animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.8)} }
    .chat-messages { flex: 1; overflow-y: auto; padding: 1.2rem; display: flex; flex-direction: column; gap: 12px; }
    .chat-msg { max-width: 72%; padding: .85rem 1.1rem; border-radius: 16px; font-size: .83rem; line-height: 1.55; }
    .chat-msg.bot { align-self: flex-start; background: var(--surface2); border-left: 3px solid var(--cyan); border-radius: 4px 16px 16px 16px; color: var(--text); }
    .chat-msg.user { align-self: flex-end; background: var(--accent); color: #fff; border-radius: 16px 16px 4px 16px; }
    .chat-input-area {
      background: var(--surface2); padding: 1rem 1.2rem;
      border-top: 1px solid var(--border); display: flex; gap: .8rem;
    }
    .chat-input-area input {
      flex: 1; padding: .7rem 1.1rem; border-radius: 30px;
      border: 1px solid var(--border); background: var(--surface3);
      color: var(--text); font-size: .85rem;
    }
    .chat-input-area input:focus { border-color: var(--cyan); box-shadow: 0 0 0 3px rgba(0,212,255,.1); }
    .chat-send {
      background: var(--accent); color: #fff; border: none;
      padding: 0 1.2rem; border-radius: 30px; font-weight: 700;
      cursor: pointer; font-size: .85rem; transition: .2s;
    }
    .chat-send:hover { background: var(--accent2); transform: scale(1.04); }
    .code-bubble {
      background: rgba(34,197,94,.1); border: 1px solid rgba(34,197,94,.3);
      border-radius: 8px; padding: .7rem 1rem; margin-top: .7rem;
      font-family: var(--font-mono); font-size: 1.3rem; font-weight: 700;
      color: var(--green); text-align: center; letter-spacing: .2em;
    }
    .code-tip { font-size: .7rem; color: var(--muted); margin-top: .3rem; text-align: center; }

    /* â”€â”€â”€ CHECKOUT MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .checkout-modal {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,.88); z-index: 600;
      justify-content: center; align-items: center;
      backdrop-filter: blur(8px);
    }
    .checkout-modal.open { display: flex; }
    .checkout-box {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 2rem; width: 420px; max-width: 95vw;
    }
    .checkout-box h2 { font-family: var(--font-head); font-size: 1.5rem; color: #fff; margin-bottom: .5rem; }
    .checkout-box p { font-size: .8rem; color: var(--muted); margin-bottom: 1.5rem; line-height: 1.6; }
    .pin-input {
      display: flex; gap: .5rem; justify-content: center; margin: 1.2rem 0;
    }
    .pin-digit {
      width: 52px; height: 60px; background: var(--surface2);
      border: 2px solid var(--border); border-radius: 8px;
      font-size: 1.6rem; font-weight: 700; color: var(--text);
      text-align: center; font-family: var(--font-mono);
    }
    .pin-digit:focus { border-color: var(--cyan); box-shadow: 0 0 0 3px rgba(0,212,255,.15); }

    /* â”€â”€â”€ SUCCESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .success-screen {
      text-align: center; padding: 3rem 2rem;
    }
    .success-icon { font-size: 4rem; margin-bottom: 1rem; }
    .success-screen h2 { font-family: var(--font-head); font-size: 2rem; color: var(--green); margin-bottom: .5rem; }
    .success-screen p { font-size: .85rem; color: var(--muted); }

    /* â”€â”€â”€ MISC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .section-header {
      display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.2rem;
    }
    .section-header h2 { font-size: 1.05rem; font-weight: 700; color: var(--text); }
    .empty-state { text-align: center; padding: 4rem 2rem; color: var(--muted); }
    .empty-state svg { width: 48px; height: 48px; stroke: var(--border); margin-bottom: 1rem; }
    .empty-state p { font-size: .85rem; }
    .loading-spinner {
      width: 30px; height: 30px; border: 3px solid var(--border);
      border-top-color: var(--accent); border-radius: 50%;
      animation: spin .8s linear infinite; margin: 3rem auto;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media(max-width: 900px) {
      .sidebar { transform: translateX(-100%); }
      .sidebar.open { transform: translateX(0); }
      .page-wrap { margin-left: 0; }
      .kpi-grid { grid-template-columns: repeat(2,1fr); }
      .hub-cards { grid-template-columns: 1fr; }
      .main { padding: 1rem; }
      .topbar { padding: .8rem 1rem; }
    }
    @media(max-width: 600px) {
      .kpi-grid { grid-template-columns: 1fr 1fr; }
      .products-grid { grid-template-columns: 1fr 1fr; }
    }

    /* Hamburger */
    .hamburger {
      display: none; background: none; border: none;
      color: var(--text); font-size: 1.3rem; cursor: pointer;
      padding: 4px 8px;
    }
    @media(max-width: 900px) { .hamburger { display: flex; } }
    .mobile-overlay {
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,.5); z-index: 199;
    }
    .mobile-overlay.open { display: block; }
  </style>
</head>
<body>

<div class="orb orb-1"></div>
<div class="orb orb-2"></div>
<div class="orb orb-3"></div>

<div class="mobile-overlay" id="mobileOverlay" onclick="closeSidebar()"></div>

<div class="app-shell">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <aside class="sidebar" id="sidebar">
    <a class="sidebar-brand" onclick="navigate('home')" style="cursor:pointer">
      <div class="sidebar-logo">
        <svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
      </div>
      <div class="sidebar-name">TechHub <small>Sistema Unificado</small></div>
    </a>

    <span class="sidebar-section">General</span>
    <button class="nav-item active" id="nav-home" onclick="navigate('home')">
      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
      Hub Principal
    </button>

    <span class="sidebar-section">Admin</span>
    <button class="nav-item" id="nav-dashboard" onclick="navigate('dashboard')">
      <svg viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      Dashboard
    </button>
    <button class="nav-item" id="nav-productos-admin" onclick="navigate('productos-admin')">
      <svg viewBox="0 0 24 24"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
      Productos
      <span class="module-badge badge-admin">Admin</span>
    </button>
    <button class="nav-item" id="nav-usuarios" onclick="navigate('usuarios')">
      <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      Usuarios
    </button>
    <button class="nav-item" id="nav-contactos" onclick="navigate('contactos')">
      <svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      Contactos
    </button>
    <button class="nav-item" id="nav-categorias" onclick="navigate('categorias')">
      <svg viewBox="0 0 24 24"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
      CategorÃ­as
    </button>

    <span class="sidebar-section">Tienda</span>
    <button class="nav-item" id="nav-tienda" onclick="navigate('tienda')">
      <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      PC Master Store
      <span class="module-badge badge-store">Tienda</span>
    </button>
    <button class="nav-item" id="nav-soporte" onclick="navigate('soporte')">
      <svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      Chat IA + 2FA
    </button>

    <span class="sidebar-section">Contenido</span>
    <button class="nav-item" id="nav-streaming" onclick="navigate('streaming')">
      <svg viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg>
      TechStream
      <span class="module-badge badge-stream">Videos</span>
    </button>

    <div class="sidebar-footer">TechHub Â© 2026 Â· Proyecto Unificado</div>
  </aside>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page-wrap">
    <header class="topbar">
      <div style="display:flex;align-items:center;gap:.8rem;">
        <button class="hamburger" onclick="toggleSidebar()">â˜°</button>
        <div class="topbar-left">
          <span class="page-title" id="topbar-title">Hub Principal</span>
          <span class="breadcrumb" id="topbar-breadcrumb">TechHub â†’ Inicio</span>
        </div>
      </div>
      <div class="topbar-right">
        <button class="topbar-cart-btn" onclick="openCart()">
          ğŸ›’ Carrito <div id="cart-count">0</div>
        </button>
        <div class="topbar-avatar" title="Admin">TH</div>
      </div>
    </header>

    <main class="main">
      <!-- â”€â”€ HUB HOME â”€â”€ -->
      <div class="page active" id="page-home">
        <div class="hub-hero">
          <div class="hub-title">TECH<span>HUB</span></div>
          <div class="hub-sub">Sistema Integrado Â· Admin Â· Tienda Â· Streaming</div>
        </div>
        <div class="hub-cards">
          <div class="hub-card admin" onclick="navigate('dashboard')">
            <div class="hub-card-icon">âš¡</div>
            <span class="hub-card-tag">AdministraciÃ³n</span>
            <span class="hub-card-title">TechNova Admin</span>
            <p class="hub-card-desc">Panel completo de gestiÃ³n: productos, usuarios, contactos y categorÃ­as. Dashboard con mÃ©tricas en tiempo real.</p>
            <div class="hub-card-arrow">Abrir panel â†’</div>
          </div>
          <div class="hub-card store" onclick="navigate('tienda')">
            <div class="hub-card-icon">ğŸ›’</div>
            <span class="hub-card-tag">E-Commerce</span>
            <span class="hub-card-title">PC Master Store</span>
            <p class="hub-card-desc">Tienda con productos reales. Carrito de compras, chat IA y verificaciÃ³n 2FA para finalizar compras con seguridad.</p>
            <div class="hub-card-arrow">Ir a la tienda â†’</div>
          </div>
          <div class="hub-card stream" onclick="navigate('streaming')">
            <div class="hub-card-icon">â–¶</div>
            <span class="hub-card-tag">Contenido</span>
            <span class="hub-card-title">TechStream</span>
            <p class="hub-card-desc">Plataforma de videos estilo Netflix. Mantenimiento, unboxings y PC builds con reproductor modal integrado.</p>
            <div class="hub-card-arrow">Ver videos â†’</div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ DASHBOARD â”€â”€ -->
      <div class="page" id="page-dashboard">
        <div class="dashboard-hero">
          <h1>Bienvenido al Panel de Control</h1>
          <p>Gestiona todos los mÃ³dulos del sistema TechHub desde un solo lugar.</p>
        </div>
        <div class="kpi-grid">
          <div class="kpi">
            <div class="kpi-label">Productos</div>
            <div class="kpi-value" id="kpi-prods">â€”</div>
            <div class="kpi-sub">en inventario</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">Usuarios</div>
            <div class="kpi-value" id="kpi-users">â€”</div>
            <div class="kpi-sub">registrados</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">Items Carrito</div>
            <div class="kpi-value" id="kpi-cart">0</div>
            <div class="kpi-sub">en sesiÃ³n actual</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">Videos</div>
            <div class="kpi-value">18</div>
            <div class="kpi-sub">en streaming</div>
          </div>
        </div>
        <div class="modules-grid-dash" style="margin-bottom:1.5rem;">
          <button class="module-card-dash" onclick="navigate('productos-admin')">
            <div class="card-icon-dash"><svg viewBox="0 0 24 24"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg></div>
            <span class="card-tag-dash">Inventario</span>
            <span class="card-title-dash">Productos</span>
            <span class="card-desc-dash">Agregar, editar y eliminar productos del catÃ¡logo</span>
          </button>
          <button class="module-card-dash" onclick="navigate('usuarios')">
            <div class="card-icon-dash"><svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
            <span class="card-tag-dash">Acceso</span>
            <span class="card-title-dash">Usuarios</span>
            <span class="card-desc-dash">GestiÃ³n de usuarios y roles del sistema</span>
          </button>
          <button class="module-card-dash" onclick="navigate('contactos')">
            <div class="card-icon-dash"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg></div>
            <span class="card-tag-dash">Clientes</span>
            <span class="card-title-dash">Contactos</span>
            <span class="card-desc-dash">Directorio de contactos vinculados</span>
          </button>
          <button class="module-card-dash" onclick="navigate('categorias')">
            <div class="card-icon-dash"><svg viewBox="0 0 24 24"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg></div>
            <span class="card-tag-dash">CatÃ¡logo</span>
            <span class="card-title-dash">CategorÃ­as</span>
            <span class="card-desc-dash">CategorÃ­as disponibles en la tienda</span>
          </button>
        </div>
      </div>

      <!-- â”€â”€ PRODUCTOS ADMIN â”€â”€ -->
      <div class="page" id="page-productos-admin">
        <div class="section-header">
          <h2>GestiÃ³n de Productos</h2>
          <button class="btn btn-primary" onclick="showAddProduct()">+ Agregar Producto</button>
        </div>
        <div class="panel">
          <div class="panel-header">
            <span class="panel-title">CatÃ¡logo de Productos</span>
          </div>
          <div id="admin-products-table"><div class="loading-spinner"></div></div>
        </div>

        <!-- Form agregar/editar -->
        <div id="product-form-wrap" style="display:none;margin-top:1.5rem;">
          <div class="form-panel">
            <h2 id="product-form-title">Agregar Producto</h2>
            <div class="form-group">
              <label>Nombre del Producto</label>
              <input type="text" id="prod-name" placeholder="ej. RTX 4090 Gaming OC">
            </div>
            <div class="form-group">
              <label>Precio (MXN)</label>
              <input type="number" id="prod-price" placeholder="0.00" step="0.01" min="0">
            </div>
            <div class="form-group">
              <label>Existencias</label>
              <input type="number" id="prod-stock" placeholder="0" min="0">
            </div>
            <div class="form-group">
              <label>CategorÃ­a</label>
              <input type="text" id="prod-cat" placeholder="ej. GPU, CPU, RAM...">
            </div>
            <div class="form-group">
              <label>URL de Imagen (opcional)</label>
              <input type="text" id="prod-img" placeholder="https://..." oninput="previewImg()">
              <img id="prod-img-preview" class="img-preview">
            </div>
            <div class="form-actions">
              <button class="btn btn-primary" onclick="saveProduct()">Guardar Producto</button>
              <button class="btn btn-outline" onclick="cancelProductForm()">Cancelar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ USUARIOS â”€â”€ -->
      <div class="page" id="page-usuarios">
        <div class="section-header">
          <h2>GestiÃ³n de Usuarios</h2>
          <button class="btn btn-primary" onclick="showAddUser()">+ Nuevo Usuario</button>
        </div>
        <div class="panel">
          <div class="panel-header"><span class="panel-title">Usuarios del Sistema</span></div>
          <div id="users-table"></div>
        </div>
        <div id="user-form-wrap" style="display:none;margin-top:1.5rem;">
          <div class="form-panel">
            <h2 id="user-form-title">Nuevo Usuario</h2>
            <div class="form-group"><label>Nombre</label><input type="text" id="user-name" placeholder="Nombre completo"></div>
            <div class="form-group"><label>Email</label><input type="email" id="user-email" placeholder="correo@ejemplo.com"></div>
            <div class="form-group"><label>Rol</label>
              <select id="user-role">
                <option>Administrador</option>
                <option>Editor</option>
                <option>Vendedor</option>
                <option>Solo Lectura</option>
              </select>
            </div>
            <div class="form-actions">
              <button class="btn btn-primary" onclick="saveUser()">Guardar</button>
              <button class="btn btn-outline" onclick="document.getElementById('user-form-wrap').style.display='none'">Cancelar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ CONTACTOS â”€â”€ -->
      <div class="page" id="page-contactos">
        <div class="section-header">
          <h2>Directorio de Contactos</h2>
          <button class="btn btn-primary" onclick="showAddContact()">+ Nuevo Contacto</button>
        </div>
        <div class="panel">
          <div class="panel-header"><span class="panel-title">Contactos Registrados</span></div>
          <div id="contacts-table"></div>
        </div>
        <div id="contact-form-wrap" style="display:none;margin-top:1.5rem;">
          <div class="form-panel">
            <h2>Nuevo Contacto</h2>
            <div class="form-group"><label>Nombre</label><input type="text" id="contact-name" placeholder="Nombre completo"></div>
            <div class="form-group"><label>TelÃ©fono</label><input type="text" id="contact-phone" placeholder="+52 55 0000 0000"></div>
            <div class="form-group"><label>CategorÃ­a/Empresa</label><input type="text" id="contact-company" placeholder="Empresa o categorÃ­a"></div>
            <div class="form-actions">
              <button class="btn btn-primary" onclick="saveContact()">Guardar</button>
              <button class="btn btn-outline" onclick="document.getElementById('contact-form-wrap').style.display='none'">Cancelar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ CATEGORIAS â”€â”€ -->
      <div class="page" id="page-categorias">
        <div class="section-header">
          <h2>CategorÃ­as de Productos</h2>
          <button class="btn btn-primary" onclick="showAddCat()">+ Nueva CategorÃ­a</button>
        </div>
        <div class="panel">
          <div class="panel-header"><span class="panel-title">CategorÃ­as Registradas</span></div>
          <div id="cats-table"></div>
        </div>
        <div id="cat-form-wrap" style="display:none;margin-top:1.5rem;">
          <div class="form-panel">
            <h2>Nueva CategorÃ­a</h2>
            <div class="form-group"><label>Nombre</label><input type="text" id="cat-name" placeholder="ej. Almacenamiento"></div>
            <div class="form-group"><label>DescripciÃ³n</label><input type="text" id="cat-desc" placeholder="DescripciÃ³n breve"></div>
            <div class="form-actions">
              <button class="btn btn-primary" onclick="saveCat()">Guardar</button>
              <button class="btn btn-outline" onclick="document.getElementById('cat-form-wrap').style.display='none'">Cancelar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ TIENDA â”€â”€ -->
      <div class="page" id="page-tienda">
        <div class="store-hero">
          <h1>TU SETUP SOÃ‘ADO</h1>
          <p>Los mejores componentes â€” Hardware High-End</p>
        </div>
        <div class="section-header">
          <h2>Productos Destacados</h2>
          <button class="btn btn-outline" onclick="navigate('soporte')">ğŸ’¬ Chat IA + CÃ³digo 2FA</button>
        </div>
        <div class="products-grid" id="store-grid">
          <div class="loading-spinner" style="grid-column:1/-1"></div>
        </div>
      </div>

      <!-- â”€â”€ SOPORTE CHAT â”€â”€ -->
      <div class="page" id="page-soporte">
        <div style="margin-bottom:1rem;">
          <h2 style="font-family:var(--font-head);font-size:1.6rem;color:#fff">
            Asistente IA <span style="color:var(--cyan)">PC Master</span>
          </h2>
          <p style="font-size:.8rem;color:var(--muted);margin-top:.3rem;">Escribe una duda tÃ©cnica o solicita tu cÃ³digo 2FA para finalizar una compra.</p>
        </div>
        <div class="chat-wrap">
          <div class="chat-header">
            <div class="chat-avatar">ğŸ¤–</div>
            <div class="chat-info">
              <h3>TechBot Pro</h3>
              <p><span class="online-dot"></span> En lÃ­nea Â· Chat IA + 2FA</p>
            </div>
          </div>
          <div class="chat-messages" id="chat-messages">
            <div class="chat-msg bot">
              Â¡Hola! Soy tu asistente de <strong>PC Master</strong>. Puedo ayudarte con:<br>
              â€¢ Dudas tÃ©cnicas de hardware<br>
              â€¢ InformaciÃ³n de envÃ­os y garantÃ­as<br>
              â€¢ ğŸ” Generar tu <strong>cÃ³digo 2FA</strong> para finalizar una compra (escribe "cÃ³digo" o "verificaciÃ³n")
            </div>
          </div>
          <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder='Escribe "cÃ³digo" para tu PIN de seguridad o tu duda...' onkeypress="if(event.key==='Enter')sendChat()">
            <button class="chat-send" onclick="sendChat()">Enviar</button>
          </div>
        </div>
      </div>

      <!-- â”€â”€ STREAMING â”€â”€ -->
      <div class="page" id="page-streaming">
        <div class="stream-hero">
          <div class="stream-hero-bg">
            <iframe src="https://www.youtube.com/embed/4otj4TZmOZs?autoplay=0&mute=1&controls=0&loop=1&playlist=4otj4TZmOZs" frameborder="0" allow="autoplay"></iframe>
          </div>
          <div class="stream-overlay"></div>
          <div class="stream-content">
            <h1>EL ARTE DEL<br>HARDWARE</h1>
            <p>Mantenimiento profesional, diagnÃ³sticos avanzados y los unboxings mÃ¡s exclusivos del mundo tecnolÃ³gico.</p>
            <button class="btn-play" onclick="openVideo('4otj4TZmOZs','GuÃ­a de Montaje 2024')">â–¶ Reproducir ahora</button>
          </div>
        </div>

        <div class="shelf">
          <h2>Mantenimiento & ReparaciÃ³n</h2>
          <div class="carousel" id="repair-shelf"></div>
        </div>
        <div class="shelf">
          <h2>Unboxings & Reviews</h2>
          <div class="carousel" id="unbox-shelf"></div>
        </div>
        <div class="shelf">
          <h2>PC Builds & Setups</h2>
          <div class="carousel" id="builds-shelf"></div>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• CART OVERLAY â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="cart-overlay" id="cartOverlay">
  <div class="cart-sheet">
    <div class="cart-header">
      <h2>ğŸ›’ Mi Carrito</h2>
      <button class="cart-close" onclick="closeCart()">âœ•</button>
    </div>
    <div class="cart-items" id="cart-items-list">
      <div class="empty-state">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        <p>Tu carrito estÃ¡ vacÃ­o.<br>Agrega productos desde la tienda.</p>
      </div>
    </div>
    <div class="cart-footer">
      <div class="cart-2fa" id="cart-2fa-notice" style="display:none">
        ğŸ” <strong>VerificaciÃ³n 2FA activa.</strong> Para finalizar la compra necesitas un cÃ³digo de seguridad.<br>
        Ve a <strong>Chat IA + 2FA</strong> para obtener tu PIN de 4 dÃ­gitos.
      </div>
      <div class="cart-total">Total: <span id="cart-total-val">$0.00</span></div>
      <button class="btn btn-primary" style="width:100%;padding:.8rem" onclick="checkout()">
        ğŸ”’ Verificar & Pagar
      </button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIDEO MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="video-modal" id="videoModal">
  <div class="video-modal-box">
    <button class="video-modal-close" onclick="closeVideo()">CERRAR âœ•</button>
    <div id="modal-video" style="width:100%;aspect-ratio:16/9"></div>
    <h2 id="modal-video-title" style="margin-top:12px;font-family:var(--font-head);color:var(--cyan);font-size:1.3rem;"></h2>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• CHECKOUT MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="checkout-modal" id="checkoutModal">
  <div class="checkout-box">
    <div id="checkout-inner">
      <h2>ğŸ” VerificaciÃ³n 2FA</h2>
      <p>Ingresa el cÃ³digo de 4 dÃ­gitos que te generÃ³ el <strong>Chat IA</strong> para autorizar tu compra.</p>
      <div class="pin-input">
        <input class="pin-digit" id="pin1" maxlength="1" type="tel" oninput="pinNext(this,'pin2')">
        <input class="pin-digit" id="pin2" maxlength="1" type="tel" oninput="pinNext(this,'pin3')">
        <input class="pin-digit" id="pin3" maxlength="1" type="tel" oninput="pinNext(this,'pin4')">
        <input class="pin-digit" id="pin4" maxlength="1" type="tel" oninput="pinNext(this,null)">
      </div>
      <p id="pin-error" style="color:var(--red);font-size:.78rem;text-align:center;min-height:1.2rem;"></p>
      <div class="form-actions" style="justify-content:center;margin-top:1rem;">
        <button class="btn btn-primary" onclick="verifyPin()">Autorizar Pago</button>
        <button class="btn btn-outline" onclick="document.getElementById('checkoutModal').classList.remove('open')">Cancelar</button>
      </div>
      <p style="text-align:center;margin-top:1rem;font-size:.72rem;color:var(--muted)">
        Â¿No tienes cÃ³digo? Ve a <button onclick="navigate('soporte');document.getElementById('checkoutModal').classList.remove('open')" style="background:none;border:none;color:var(--cyan);cursor:pointer;font-size:.72rem">Chat IA + 2FA â†’</button>
      </p>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DATA STORE (localStorage para persistencia)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const STORAGE_KEY = 'techhub_data';

function getData() {
  const d = localStorage.getItem(STORAGE_KEY);
  if (d) return JSON.parse(d);
  // Datos iniciales con productos originales de la tienda
  return {
    products: [
      { id: 1, name: 'RTX 4090 Gaming OC', price: 34999, stock: 5, cat: 'GPU', img: '' },
      { id: 2, name: 'Intel Core i9-14900K', price: 12500, stock: 12, cat: 'CPU', img: '' },
      { id: 3, name: 'Ryzen 9 7950X3D', price: 13800, stock: 8, cat: 'CPU', img: '' },
      { id: 4, name: 'RAM DDR5 64GB Kingston', price: 4200, stock: 20, cat: 'RAM', img: '' },
      { id: 5, name: 'SSD NVMe 2TB Samsung 990 Pro', price: 3600, stock: 15, cat: 'SSD', img: '' },
      { id: 6, name: 'Monitor OLED 4K 144Hz LG', price: 18900, stock: 3, cat: 'Monitor', img: '' },
      { id: 7, name: 'Teclado MecÃ¡nico Wooting 60HE', price: 5200, stock: 7, cat: 'PerifÃ©rico', img: '' },
      { id: 8, name: 'Mouse Razer DeathAdder V3', price: 1800, stock: 25, cat: 'PerifÃ©rico', img: '' },
      { id: 9, name: 'Fuente Corsair 1000W 80+ Platinum', price: 4800, stock: 10, cat: 'Fuente', img: '' },
      { id: 10, name: 'RTX 4070 Super Founders', price: 16500, stock: 6, cat: 'GPU', img: '' },
    ],
    users: [
      { id: 1, name: 'Carlos Mendoza', email: 'carlos@techhub.mx', role: 'Administrador' },
      { id: 2, name: 'Ana GarcÃ­a', email: 'ana@techhub.mx', role: 'Editor' },
    ],
    contacts: [
      { id: 1, name: 'Proveedor Intel MÃ©xico', phone: '+52 55 1234-5678', company: 'CPU' },
      { id: 2, name: 'Distribuidora NVIDIA', phone: '+52 55 9876-5432', company: 'GPU' },
    ],
    cats: [
      { id: 1, name: 'GPU', desc: 'Tarjetas de Video' },
      { id: 2, name: 'CPU', desc: 'Procesadores' },
      { id: 3, name: 'RAM', desc: 'Memorias RAM' },
      { id: 4, name: 'SSD', desc: 'Almacenamiento SSD/NVMe' },
      { id: 5, name: 'Monitor', desc: 'Monitores' },
      { id: 6, name: 'PerifÃ©rico', desc: 'Teclados y ratones' },
      { id: 7, name: 'Fuente', desc: 'Fuentes de Poder' },
    ],
    nextId: 100
  };
}

function saveData(d) { localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CART
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let cart = JSON.parse(localStorage.getItem('techhub_cart') || '[]');
let generated2FA = sessionStorage.getItem('code_2fa') || null;

function saveCart() { localStorage.setItem('techhub_cart', JSON.stringify(cart)); }

function addToCart(productId) {
  const data = getData();
  const prod = data.products.find(p => p.id === productId);
  if (!prod) return;
  const existing = cart.find(c => c.id === productId);
  if (existing) { existing.qty++; }
  else { cart.push({ id: productId, name: prod.name, price: prod.price, img: prod.img, qty: 1 }); }
  saveCart();
  updateCartUI();
  openCart();
}

function updateCartUI() {
  const count = cart.reduce((s,c) => s + c.qty, 0);
  document.getElementById('cart-count').textContent = count;
  document.getElementById('kpi-cart').textContent = count;
  const total = cart.reduce((s,c) => s + c.price * c.qty, 0);
  document.getElementById('cart-total-val').textContent = '$' + total.toLocaleString('es-MX', {minimumFractionDigits:2});
  const listEl = document.getElementById('cart-items-list');
  const noticeEl = document.getElementById('cart-2fa-notice');
  if (cart.length === 0) {
    listEl.innerHTML = `<div class="empty-state"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg><p>Tu carrito estÃ¡ vacÃ­o.</p></div>`;
    noticeEl.style.display = 'none';
    return;
  }
  noticeEl.style.display = generated2FA ? 'none' : 'block';
  listEl.innerHTML = cart.map(c => {
    const img = c.img || getProductImg(c.name);
    return `<div class="cart-item">
      <img src="${img}" onerror="this.src='https://dummyimage.com/80x80/131825/6c63ff&text=PC'">
      <div class="cart-item-info"><span>${c.name}</span><small>$${(c.price * c.qty).toLocaleString('es-MX', {minimumFractionDigits:2})}</small></div>
      <div class="cart-item-qty">
        <button class="qty-btn" onclick="changeQty(${c.id},-1)">âˆ’</button>
        <span class="qty-val">${c.qty}</span>
        <button class="qty-btn" onclick="changeQty(${c.id},1)">+</button>
      </div>
      <button class="cart-item-del" onclick="removeFromCart(${c.id})">ğŸ—‘</button>
    </div>`;
  }).join('');
}

function changeQty(id, delta) {
  const item = cart.find(c => c.id === id);
  if (!item) return;
  item.qty += delta;
  if (item.qty <= 0) cart = cart.filter(c => c.id !== id);
  saveCart(); updateCartUI();
}
function removeFromCart(id) { cart = cart.filter(c => c.id !== id); saveCart(); updateCartUI(); }
function openCart() { document.getElementById('cartOverlay').classList.add('open'); updateCartUI(); }
function closeCart() { document.getElementById('cartOverlay').classList.remove('open'); }
document.getElementById('cartOverlay').addEventListener('click', e => { if (e.target === document.getElementById('cartOverlay')) closeCart(); });

function checkout() {
  if (cart.length === 0) { alert('Tu carrito estÃ¡ vacÃ­o.'); return; }
  if (!generated2FA) {
    closeCart();
    if (confirm('âš ï¸ Necesitas un cÃ³digo 2FA del Chat IA para pagar.\nÂ¿Ir al chat ahora?')) navigate('soporte');
    return;
  }
  document.getElementById('pin-error').textContent = '';
  ['pin1','pin2','pin3','pin4'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('checkout-inner').innerHTML = document.getElementById('checkout-inner').innerHTML;
  document.getElementById('checkoutModal').classList.add('open');
  setTimeout(() => document.getElementById('pin1').focus(), 100);
}

function pinNext(el, nextId) {
  if (el.value.length === 1 && nextId) document.getElementById(nextId).focus();
}

function verifyPin() {
  const entered = ['pin1','pin2','pin3','pin4'].map(id => document.getElementById(id).value).join('');
  if (entered.length < 4) { document.getElementById('pin-error').textContent = 'Ingresa los 4 dÃ­gitos del cÃ³digo.'; return; }
  if (entered === generated2FA) {
    cart = []; saveCart(); updateCartUI();
    sessionStorage.removeItem('code_2fa'); generated2FA = null;
    document.getElementById('checkout-inner').innerHTML = `<div class="success-screen"><div class="success-icon">âœ…</div><h2>Â¡Compra Exitosa!</h2><p>Tu pedido ha sido procesado correctamente.<br>El inventario ha sido actualizado.<br><br><button class="btn btn-outline" onclick="document.getElementById('checkoutModal').classList.remove('open')">Cerrar</button></p></div>`;
  } else {
    document.getElementById('pin-error').textContent = 'âŒ CÃ³digo incorrecto. Verifica con el Chat IA.';
    ['pin1','pin2','pin3','pin4'].forEach(id => document.getElementById(id).value = '');
    document.getElementById('pin1').focus();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHAT IA + 2FA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function sendChat() {
  const input = document.getElementById('chat-input');
  const msg = input.value.trim(); if (!msg) return;
  appendMsg(msg, 'user'); input.value = '';
  setTimeout(() => { appendMsg(processChat(msg), 'bot'); }, 700);
}
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('chat-input')?.addEventListener('keypress', e => { if(e.key==='Enter') sendChat(); });
});

function processChat(input) {
  const m = input.toLowerCase();
  if (m.match(/(codigo|verificacion|seguridad|2fa|comprar|pagar|pin)/)) {
    const pin = String(Math.floor(1000 + Math.random() * 9000));
    generated2FA = pin; sessionStorage.setItem('code_2fa', pin);
    return `ğŸ›¡ï¸ <strong>CÃ³digo 2FA Generado:</strong><div class="code-bubble">${pin}</div><div class="code-tip">Usa este PIN en el carrito para autorizar tu compra. El cÃ³digo expira al usarse.</div>`;
  }
  if (m.match(/(envio|entrega|dhl|fedex|llegada)/)) return 'ğŸ“¦ Nuestros envÃ­os son por DHL Express. Llegan en 24-48 horas a cualquier parte de MÃ©xico con seguro incluido.';
  if (m.match(/(garantia|falla|roto|defecto)/)) return 'ğŸ”§ Todos nuestros componentes tienen <strong>1 aÃ±o de garantÃ­a directa</strong>. Si tienes un problema, contÃ¡ctanos y lo gestionamos.';
  if (m.match(/(rtx|gpu|tarjeta)/)) return 'ğŸ® Tenemos RTX 4090, RTX 4070 Super y varios modelos mÃ¡s. Las tarjetas NVIDIA incluyen garantÃ­a y son 100% originales de distribuidores autorizados.';
  if (m.match(/(cpu|procesador|intel|ryzen|amd)/)) return 'âš™ï¸ Contamos con Intel Core i9-14900K y Ryzen 9 7950X3D entre nuestros top de gama. Todos con caja sellada y garantÃ­a oficial.';
  if (m.match(/(precio|costo|cuanto)/)) return 'ğŸ’° Los precios los puedes ver en la tienda. Para descuentos especiales, escribe "descuento" y te enlazamos con un asesor.';
  if (m.match(/(descuento|oferta|promo)/)) return 'ğŸ·ï¸ Actualmente tenemos 10% de descuento en combos (CPU+GPU). Menciona el cÃ³digo <strong>TECHHUB10</strong> al finalizar tu compra.';
  if (m.match(/(hola|hi|buenas|buen dia|buenas noches)/)) return 'Â¡Hola! Bienvenido a PC Master. Â¿En quÃ© puedo ayudarte hoy? Puedo resolver dudas de hardware o generarte un cÃ³digo de seguridad (2FA) para tu compra.';
  return `Entendido ğŸ‘. Para darte el mejor soporte, sÃ© mÃ¡s especÃ­fico con tu duda de hardware. <br><br>O si ya estÃ¡s listo para pagar, escribe <strong>"cÃ³digo"</strong> para obtener tu PIN de verificaciÃ³n 2FA.`;
}

function appendMsg(html, type) {
  const box = document.getElementById('chat-messages');
  const div = document.createElement('div');
  div.className = 'chat-msg ' + type;
  div.innerHTML = html;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STREAMING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const streamData = {
  'repair-shelf': [
    { id: 'BCnQGgctQ_Y', title: 'Mantenimiento Preventivo' },
    { id: 'ffdQHGXU9Do', title: 'SoluciÃ³n EnergÃ­a EstÃ¡tica' },
    { id: 'IimIsW4S_vs', title: 'DiagnÃ³stico PC no Prende' },
    { id: 'df6Wk4fru2Q', title: 'PC enciende sin imagen' },
    { id: 'UCYTf3M4Y54', title: 'ReparaciÃ³n Placa Base' },
    { id: 'T63afU5E3gg', title: 'Limpieza Hardware' }
  ],
  'unbox-shelf': [
    { id: '37rasBhG7B4', title: 'Review Wooting 60HE' },
    { id: 'N_psXRtVgAQ', title: 'Custom Nate Gentile' },
    { id: '-fTogZgBXwE', title: 'RTX 4090 ROG Strix' },
    { id: 'nYS9LVRUYKA', title: 'Switches Premium' },
    { id: 'olimrm09A0E', title: 'Monitor OLED 4K' },
    { id: 'xnWSooaspgU', title: 'Intel vs AMD 2025' }
  ],
  'builds-shelf': [
    { id: '4otj4TZmOZs', title: 'GuÃ­a de Montaje Paso a Paso' },
    { id: 'PXaLc9AYIcg', title: 'Enfriamiento LÃ­quido Custom' },
    { id: 'bP03AKVA1i0', title: 'RTX 4090 Founders Edition' },
    { id: 'WigYb5NtUyM', title: 'ARMANDO mi nueva computadora GAMER - 2026' },
    { id: 'E8IDX7eIkiE', title: 'Unboxing PNY RTX 3060 XLR8' },
    { id: 'zuJkKl-ZbkY', title: 'PC Gamer $50 vs $5,000 USD' }
  ]
};

function initStreaming() {
  for (const shelfId in streamData) {
    const container = document.getElementById(shelfId);
    if (!container) continue;
    container.innerHTML = '';
    streamData[shelfId].forEach(v => {
      const card = document.createElement('div');
      card.className = 'vid-card';
      card.innerHTML = `
        <img src="https://img.youtube.com/vi/${v.id}/mqdefault.jpg" alt="${v.title}">
        <div class="play-icon">â–¶</div>
        <div class="vid-card-title">${v.title}</div>
      `;
      card.onclick = () => openVideo(v.id, v.title);
      container.appendChild(card);
    });
  }
}

function openVideo(id, title) {
  document.getElementById('videoModal').classList.add('open');
  document.getElementById('modal-video').innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${id}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
  document.getElementById('modal-video-title').textContent = title;
  document.body.style.overflow = 'hidden';
}
function closeVideo() {
  document.getElementById('videoModal').classList.remove('open');
  document.getElementById('modal-video').innerHTML = '';
  document.body.style.overflow = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TIENDA - RENDER PRODUCTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getProductImg(name) {
  const n = name.toUpperCase();
  if (n.includes('RTX') || n.includes('RADEON') || n.includes('GPU')) return 'https://images.unsplash.com/photo-1591488320449-011701bb6704?auto=format&fit=crop&w=500&q=80';
  if (n.includes('INTEL') || n.includes('I9') || n.includes('I7') || n.includes('I5')) return 'https://images.unsplash.com/photo-1563207153-f404bf402a10?auto=format&fit=crop&w=500&q=80';
  if (n.includes('RYZEN') || n.includes('AMD')) return 'https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?auto=format&fit=crop&w=500&q=80';
  if (n.includes('MONITOR')) return 'https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?auto=format&fit=crop&w=500&q=80';
  if (n.includes('TECLADO') || n.includes('KEYBOARD') || n.includes('WOOTING')) return 'https://images.unsplash.com/photo-1595225476474-87563907a212?auto=format&fit=crop&w=500&q=80';
  if (n.includes('MOUSE') || n.includes('RAZER')) return 'https://images.unsplash.com/photo-1605773527852-c546a8584ea3?auto=format&fit=crop&w=500&q=80';
  if (n.includes('RAM') || n.includes('MEMORIA') || n.includes('DDR')) return 'https://images.unsplash.com/photo-1562976540-1502f7554d63?auto=format&fit=crop&w=500&q=80';
  if (n.includes('SSD') || n.includes('NVME') || n.includes('SAMSUNG')) return 'https://images.unsplash.com/photo-1628557044797-f21a177c37ec?auto=format&fit=crop&w=500&q=80';
  if (n.includes('FUENTE') || n.includes('CORSAIR')) return 'https://images.unsplash.com/photo-1587202372775-e229f172b9d7?auto=format&fit=crop&w=500&q=80';
  return 'https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=500&q=80';
}

function renderStore() {
  const grid = document.getElementById('store-grid');
  const data = getData();
  if (!data.products.length) { grid.innerHTML = '<p style="color:var(--muted);grid-column:1/-1;text-align:center;padding:3rem">No hay productos disponibles.</p>'; return; }
  grid.innerHTML = data.products.map(p => {
    const img = p.img || getProductImg(p.name);
    return `<div class="product-card">
      <img src="${img}" onerror="this.src='https://dummyimage.com/300x180/131825/00d4ff&text=PC+MASTER'" alt="${p.name}">
      <div class="product-card-body">
        <h3>${p.name}</h3>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:.8rem;">
          <span class="product-price">$${p.price.toLocaleString('es-MX', {minimumFractionDigits:2})}</span>
          <span class="product-stock ${p.stock > 0 ? '' : 'pill pill-red'}">
            ${p.stock > 0 ? `Stock: ${p.stock}` : '<span class="pill pill-red">Agotado</span>'}
          </span>
        </div>
        <div class="product-card-actions">
          <button class="btn btn-cyan" style="width:100%" onclick="addToCart(${p.id})" ${p.stock === 0 ? 'disabled' : ''}>
            ${p.stock > 0 ? 'ğŸ›’ Agregar al Carrito' : 'Sin Stock'}
          </button>
        </div>
      </div>
    </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ADMIN - PRODUCTOS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let editingProductId = null;

function renderAdminProducts() {
  const data = getData();
  const el = document.getElementById('admin-products-table');
  if (!data.products.length) { el.innerHTML = '<div class="empty-state"><p>No hay productos. Agrega el primero.</p></div>'; return; }
  el.innerHTML = `<table>
    <thead><tr><th>Img</th><th>Nombre</th><th>CategorÃ­a</th><th>Precio</th><th>Stock</th><th>Acciones</th></tr></thead>
    <tbody>${data.products.map(p => `<tr>
      <td><img src="${p.img || getProductImg(p.name)}" onerror="this.src='https://dummyimage.com/40x40/131825/6c63ff&text=P'" alt=""></td>
      <td>${p.name}</td>
      <td><span class="pill pill-purple">${p.cat}</span></td>
      <td><strong style="color:var(--cyan)">$${p.price.toLocaleString('es-MX', {minimumFractionDigits:2})}</strong></td>
      <td><span class="pill ${p.stock > 0 ? 'pill-green' : 'pill-red'}">${p.stock}</span></td>
      <td style="display:flex;gap:.4rem">
        <button class="btn btn-outline btn-sm" onclick="editProduct(${p.id})">Editar</button>
        <button class="btn btn-danger btn-sm" onclick="deleteProduct(${p.id})">Eliminar</button>
      </td>
    </tr>`).join('')}</tbody>
  </table>`;
  document.getElementById('kpi-prods').textContent = data.products.length;
}

function showAddProduct() {
  editingProductId = null;
  document.getElementById('product-form-title').textContent = 'Agregar Producto';
  ['prod-name','prod-price','prod-stock','prod-cat','prod-img'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('prod-img-preview').style.display = 'none';
  document.getElementById('product-form-wrap').style.display = 'block';
  document.getElementById('prod-name').focus();
}

function editProduct(id) {
  const data = getData();
  const p = data.products.find(x => x.id === id); if (!p) return;
  editingProductId = id;
  document.getElementById('product-form-title').textContent = 'Editar Producto';
  document.getElementById('prod-name').value = p.name;
  document.getElementById('prod-price').value = p.price;
  document.getElementById('prod-stock').value = p.stock;
  document.getElementById('prod-cat').value = p.cat;
  document.getElementById('prod-img').value = p.img || '';
  if (p.img) { const prev = document.getElementById('prod-img-preview'); prev.src = p.img; prev.style.display = 'block'; }
  document.getElementById('product-form-wrap').style.display = 'block';
  document.getElementById('prod-name').focus();
}

function saveProduct() {
  const name = document.getElementById('prod-name').value.trim();
  const price = parseFloat(document.getElementById('prod-price').value);
  const stock = parseInt(document.getElementById('prod-stock').value);
  const cat = document.getElementById('prod-cat').value.trim();
  const img = document.getElementById('prod-img').value.trim();
  if (!name || isNaN(price) || isNaN(stock)) { alert('Completa todos los campos requeridos.'); return; }
  const data = getData();
  if (editingProductId) {
    const p = data.products.find(x => x.id === editingProductId);
    if (p) { p.name = name; p.price = price; p.stock = stock; p.cat = cat; p.img = img; }
  } else {
    data.products.push({ id: data.nextId++, name, price, stock, cat, img });
  }
  saveData(data);
  cancelProductForm();
  renderAdminProducts();
  renderStore();
}

function deleteProduct(id) {
  if (!confirm('Â¿Eliminar este producto?')) return;
  const data = getData();
  data.products = data.products.filter(p => p.id !== id);
  saveData(data);
  renderAdminProducts();
  renderStore();
}

function cancelProductForm() {
  document.getElementById('product-form-wrap').style.display = 'none';
  editingProductId = null;
}

function previewImg() {
  const url = document.getElementById('prod-img').value;
  const prev = document.getElementById('prod-img-preview');
  if (url) { prev.src = url; prev.style.display = 'block'; }
  else prev.style.display = 'none';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ADMIN - USUARIOS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderUsers() {
  const data = getData();
  const el = document.getElementById('users-table');
  if (!data.users.length) { el.innerHTML = '<div class="empty-state"><p>No hay usuarios registrados.</p></div>'; return; }
  el.innerHTML = `<table>
    <thead><tr><th>Nombre</th><th>Email</th><th>Rol</th><th>Acciones</th></tr></thead>
    <tbody>${data.users.map(u => `<tr>
      <td><strong>${u.name}</strong></td>
      <td style="color:var(--muted)">${u.email}</td>
      <td><span class="pill ${u.role==='Administrador'?'pill-purple':'pill-yellow'}">${u.role}</span></td>
      <td><button class="btn btn-danger btn-sm" onclick="deleteUser(${u.id})">Eliminar</button></td>
    </tr>`).join('')}</tbody>
  </table>`;
  document.getElementById('kpi-users').textContent = data.users.length;
}

function showAddUser() { document.getElementById('user-form-wrap').style.display = 'block'; document.getElementById('user-name').focus(); }

function saveUser() {
  const name = document.getElementById('user-name').value.trim();
  const email = document.getElementById('user-email').value.trim();
  const role = document.getElementById('user-role').value;
  if (!name || !email) { alert('Completa nombre y email.'); return; }
  const data = getData();
  data.users.push({ id: data.nextId++, name, email, role });
  saveData(data); document.getElementById('user-form-wrap').style.display = 'none';
  document.getElementById('user-name').value = ''; document.getElementById('user-email').value = '';
  renderUsers();
}

function deleteUser(id) {
  if (!confirm('Â¿Eliminar usuario?')) return;
  const data = getData();
  data.users = data.users.filter(u => u.id !== id);
  saveData(data); renderUsers();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ADMIN - CONTACTOS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderContacts() {
  const data = getData();
  const el = document.getElementById('contacts-table');
  if (!data.contacts.length) { el.innerHTML = '<div class="empty-state"><p>No hay contactos registrados.</p></div>'; return; }
  el.innerHTML = `<table>
    <thead><tr><th>Nombre</th><th>TelÃ©fono</th><th>CategorÃ­a</th><th>Acciones</th></tr></thead>
    <tbody>${data.contacts.map(c => `<tr>
      <td><strong>${c.name}</strong></td>
      <td style="font-family:var(--font-mono);font-size:.78rem">${c.phone}</td>
      <td><span class="pill pill-green">${c.company}</span></td>
      <td><button class="btn btn-danger btn-sm" onclick="deleteContact(${c.id})">Eliminar</button></td>
    </tr>`).join('')}</tbody>
  </table>`;
}

function showAddContact() { document.getElementById('contact-form-wrap').style.display = 'block'; document.getElementById('contact-name').focus(); }
function saveContact() {
  const name = document.getElementById('contact-name').value.trim();
  const phone = document.getElementById('contact-phone').value.trim();
  const company = document.getElementById('contact-company').value.trim();
  if (!name) { alert('Ingresa un nombre.'); return; }
  const data = getData();
  data.contacts.push({ id: data.nextId++, name, phone, company });
  saveData(data); document.getElementById('contact-form-wrap').style.display = 'none';
  ['contact-name','contact-phone','contact-company'].forEach(id => document.getElementById(id).value = '');
  renderContacts();
}
function deleteContact(id) {
  if (!confirm('Â¿Eliminar contacto?')) return;
  const data = getData(); data.contacts = data.contacts.filter(c => c.id !== id);
  saveData(data); renderContacts();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ADMIN - CATEGORÃAS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCats() {
  const data = getData();
  const el = document.getElementById('cats-table');
  if (!data.cats.length) { el.innerHTML = '<div class="empty-state"><p>No hay categorÃ­as.</p></div>'; return; }
  el.innerHTML = `<table>
    <thead><tr><th>Nombre</th><th>DescripciÃ³n</th><th>Acciones</th></tr></thead>
    <tbody>${data.cats.map(c => `<tr>
      <td><strong>${c.name}</strong></td>
      <td style="color:var(--muted)">${c.desc}</td>
      <td><button class="btn btn-danger btn-sm" onclick="deleteCat(${c.id})">Eliminar</button></td>
    </tr>`).join('')}</tbody>
  </table>`;
}

function showAddCat() { document.getElementById('cat-form-wrap').style.display = 'block'; document.getElementById('cat-name').focus(); }
function saveCat() {
  const name = document.getElementById('cat-name').value.trim();
  const desc = document.getElementById('cat-desc').value.trim();
  if (!name) { alert('Ingresa un nombre.'); return; }
  const data = getData();
  data.cats.push({ id: data.nextId++, name, desc });
  saveData(data); document.getElementById('cat-form-wrap').style.display = 'none';
  ['cat-name','cat-desc'].forEach(id => document.getElementById(id).value = '');
  renderCats();
}
function deleteCat(id) {
  if (!confirm('Â¿Eliminar categorÃ­a?')) return;
  const data = getData(); data.cats = data.cats.filter(c => c.id !== id);
  saveData(data); renderCats();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const pages = ['home','dashboard','productos-admin','usuarios','contactos','categorias','tienda','soporte','streaming'];
const pageTitles = {
  'home': ['Hub Principal', 'TechHub â†’ Inicio'],
  'dashboard': ['Dashboard', 'Admin â†’ Dashboard'],
  'productos-admin': ['GestiÃ³n de Productos', 'Admin â†’ Productos'],
  'usuarios': ['Usuarios', 'Admin â†’ Usuarios'],
  'contactos': ['Contactos', 'Admin â†’ Contactos'],
  'categorias': ['CategorÃ­as', 'Admin â†’ CategorÃ­as'],
  'tienda': ['PC Master Store', 'Tienda â†’ Inicio'],
  'soporte': ['Chat IA + 2FA', 'Tienda â†’ Soporte'],
  'streaming': ['TechStream', 'Contenido â†’ Streaming'],
};
const pageInit = {
  'productos-admin': renderAdminProducts,
  'usuarios': renderUsers,
  'contactos': renderContacts,
  'categorias': renderCats,
  'tienda': renderStore,
  'streaming': initStreaming,
};

function navigate(page) {
  pages.forEach(p => {
    document.getElementById('page-' + p)?.classList.remove('active');
    document.getElementById('nav-' + p)?.classList.remove('active');
  });
  document.getElementById('page-' + page)?.classList.add('active');
  document.getElementById('nav-' + page)?.classList.add('active');
  const [title, breadcrumb] = pageTitles[page] || [page, page];
  document.getElementById('topbar-title').textContent = title;
  document.getElementById('topbar-breadcrumb').textContent = breadcrumb;
  if (pageInit[page]) pageInit[page]();
  closeSidebar();
  window.scrollTo(0, 0);
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
  document.getElementById('mobileOverlay').classList.toggle('open');
}
function closeSidebar() {
  document.getElementById('sidebar').classList.remove('open');
  document.getElementById('mobileOverlay').classList.remove('open');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function init() {
  updateCartUI();
  // Update dashboard KPIs
  const data = getData();
  document.getElementById('kpi-prods').textContent = data.products.length;
  document.getElementById('kpi-users').textContent = data.users.length;
})();
</script>
</body>
</html>
